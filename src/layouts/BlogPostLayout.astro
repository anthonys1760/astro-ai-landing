---
import Layout from "./Layout.astro";
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { Image } from 'astro:assets';

// Import featured image for the blog post
import astronautImage from '../assets/astronaut-in-space.jpg';

const { frontmatter } = Astro.props;

// Build SEO fields
const defaultKeywords = 'AI assistant, artificial intelligence, virtual assistant, productivity tools, machine learning, AI technology, Astro AI, chat assistant';
const keywords = Array.isArray(frontmatter.tags) && frontmatter.tags.length
  ? `${defaultKeywords}, ${frontmatter.tags.join(', ')}`
  : defaultKeywords;
const description = frontmatter.description || frontmatter.excerpt || `Read ${frontmatter.title} from the Astro AI Blog covering AI technology and productivity.`;

// Map image names to imported assets
const imageMap = {
  'astronaut-in-space': astronautImage,
};
---

<Layout title={`${frontmatter.title} - Astro AI Blog`} description={description} keywords={frontmatter.keywords || keywords}>
  <div class="min-h-screen bg-dark">
    <Header />
    <main>
      <div class="container-custom py-16 max-w-4xl">
    <div class="mb-8">
      <a href="/blog" class="text-primary hover:text-primary/80 flex items-center gap-2 mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
        </svg>
        Back to Blog
      </a>
      
      <h1 class="text-3xl md:text-4xl font-bold mb-4">
        {frontmatter.title}
      </h1>
      
      <div class="flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-6">
        <div class="flex items-center gap-2">
          <img src="/logo/spaceman.png" alt="Astro AI Team" class="w-6 h-6 rounded-full object-cover" />
          <span>{frontmatter.author}</span>
        </div>
        <span>‚Ä¢</span>
        <span>{frontmatter.date}</span>
        <span>‚Ä¢</span>
        <div class="flex gap-2">
          {frontmatter.tags.map((tag: string) => (
            <span class="inline-flex items-center text-xs px-2 py-0.5 leading-none bg-primary/20 text-primary rounded-full">{tag}</span>
          ))}
        </div>
      </div>
      
      <div class="aspect-video bg-gray-800 rounded-xl overflow-hidden mb-10 w-full">
        {frontmatter.image && imageMap[frontmatter.image] ? (
          <Image 
            src={imageMap[frontmatter.image]} 
            alt={frontmatter.title} 
            class="w-full h-full object-cover"
          />
        ) : frontmatter.image && /\.(png|jpg|jpeg|webp|gif|svg)$/i.test(frontmatter.image) ? (
          <img 
            src={`/assets/${frontmatter.image}`}
            alt={frontmatter.title}
            class="w-full h-full object-cover" />
        ) : (
          <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/20 to-secondary/20">
            <span class="text-4xl">{frontmatter.emoji || 'üñºÔ∏è'}</span>
          </div>
        )}
      </div>
    </div>
    
    <article class="blog-content">
      <slot />
    </article>
    
    <style>
      .blog-content {
        color: #fff;
        max-width: 100%;
        line-height: 1.6;
      }
      
      .blog-content :global(h1) {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 1.5rem;
        margin-top: 2.5rem;
      }
      
      .blog-content :global(h2) {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1.25rem;
        margin-top: 2.5rem;
      }

      .blog-content :global(h3) {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1rem;
        margin-top: 2rem;
      }

      .blog-content :global(h4) {
        font-size: 1.125rem;
        font-weight: 700;
        margin-bottom: 0.75rem;
        margin-top: 1.5rem;
      }
      
      .blog-content :global(p) {
        margin-bottom: 1.5rem;
        line-height: 1.8;
      }

      .blog-content :global(a) {
        color: #8b9cff;
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      .blog-content :global(a:hover) {
        color: #a9b6ff;
      }
      
      .blog-content :global(ul),
      .blog-content :global(ol) {
        margin: 1.5rem 0 1.5rem 1.5rem;
        padding-left: 1.25rem;
      }
      
      .blog-content :global(li) {
        margin-bottom: 0.75rem;
        line-height: 1.6;
      }

      .blog-content :global(ul) { list-style: disc; }
      .blog-content :global(ol) { list-style: decimal; }

      .blog-content :global(code) {
        background: #111827;
        border: 1px solid #1f2937;
        padding: 0.15rem 0.35rem;
        border-radius: 0.375rem;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.95em;
      }

      .blog-content :global(pre) {
        background: #0b1220;
        border: 1px solid #1f2937;
        border-radius: 0.5rem;
        padding: 1rem;
        overflow: auto;
        margin: 1.25rem 0;
      }

      .blog-content :global(pre code) {
        background: transparent;
        border: 0;
        padding: 0;
        white-space: pre;
        display: block;
      }
      
      .blog-content :global(strong) {
        font-weight: bold;
      }

      .blog-content :global(em) {
        font-style: italic;
      }
      
      .blog-content :global(blockquote) {
        border-left: 4px solid #6366f1;
        padding-left: 1rem;
        margin-left: 0;
        margin-right: 0;
        font-style: italic;
        color: #d1d5db;
        background: linear-gradient(90deg, rgba(99,102,241,0.08), rgba(17,24,39,0) 60%);
      }

      .blog-content :global(hr) {
        border: 0;
        border-top: 1px solid #1f2937;
        margin: 2rem 0;
      }

      .blog-content :global(img) {
        border-radius: 0.5rem;
        margin: 1.25rem 0;
      }

      .blog-content :global(figure) {
        margin: 1.5rem 0;
        text-align: center;
      }

      .blog-content :global(figcaption) {
        font-size: 0.9rem;
        color: #9ca3af;
        margin-top: 0.5rem;
      }

      .blog-content :global(table) {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
      }

      .blog-content :global(th),
      .blog-content :global(td) {
        border: 1px solid #1f2937;
        padding: 0.75rem 0.75rem;
        text-align: left;
      }

      .blog-content :global(th) {
        background: #0f172a;
        font-weight: 600;
      }
    </style>
    
    <div class="mt-16 border-t border-gray-800 pt-8">
      <h3 class="text-xl font-bold mb-4">Continue Reading</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <a href="/blog" class="p-6 bg-dark-light rounded-xl hover:bg-gray-800 transition-colors">
          <h4 class="font-bold mb-2">Discover more articles</h4>
          <p class="text-sm text-gray-400">Browse our full collection of AI insights and tutorials</p>
        </a>
        <a href="https://apps.apple.com/us/app/astroai-x/id6748281772" class="p-6 bg-primary/10 rounded-xl hover:bg-primary/20 transition-colors">
          <h4 class="font-bold mb-2">Download on iOS</h4>
          <p class="text-sm text-gray-400">Get Astro AI X from the App Store and start creating</p>
        </a>
      </div>
      </div>
    </main>
    <Footer />
  </div>
</Layout>
