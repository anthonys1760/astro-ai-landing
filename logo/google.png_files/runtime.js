(()=>{"use strict";var t={579:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentRegistry=void 0;var o=n(455),r=n(279),i=n(357),a=n(560),u=function(){function t(){this.components=new Map,this.registerComponent(o.Image).registerComponent(r.Text).registerComponent(a.Video).registerComponent(i.Url)}return t.prototype.registerComponent=function(t){return this.components.set(t.componentName,t),this},t.prototype.getByName=function(t){return this.components.get(t)},t}();e.ComponentRegistry=u},410:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0,e.Component=function(){function t(){}return t.serialize=function(t){return JSON.stringify(t)},t.componentName="component",t}()},455:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var i=n(410);e.Image=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.serialize=function(t){return t.src},e.componentName="image",e}(i.Component)},279:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0;var i=n(410);e.Text=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.serialize=function(t){return t.value},e.componentName="text",e}(i.Component)},357:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Url=void 0;var i=n(410);e.Url=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.serialize=function(t){return t.value},e.componentName="url",e}(i.Component)},560:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Video=void 0;var i=n(410);e.Video=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.serialize=function(t){return t.src},e.componentName="video",e}(i.Component)},530:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultValuesFromHtmlTemplateMetadata=void 0,e.defaultValuesFromHtmlTemplateMetadata=function(t){return function(e){for(var n,o=e.elements,r={},i=0,a=Object.entries(o);i<a.length;i++)for(var u=a[i],l=u[0],s=u[1],c=0,p=Object.entries(s);c<p.length;c++){var d=p[c],f=d[0],y=d[1],v=null!==(n=s.reportingDimension)&&void 0!==n?n:l,m=t.getByName(f);m&&(r[v]=m.serialize(y))}return r}}},42:function(t,e,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(579),i=n(530),a=n(962),u=n(67),l=n(135),s=function(){function t(t){var e=this;this.templateMetadata=t,this.componentRegistry=new r.ComponentRegistry,this.onWindowLoad=function(){Enabler.isInitialized()?e.onEnablerInit():Enabler.addEventListener(studio.events.StudioEvent.INIT,e.onEnablerInit)},this.onEnablerInit=function(){e.applyAdLibElementAttributes(),enablerInitHandler(),e.applyDynamicStyles()},this.getLiveProductData=function(){var t=Object.keys(window.dynamicContent)[0];return window.dynamicContent[t][0]},this.getDefaultValues=function(){return(0,i.defaultValuesFromHtmlTemplateMetadata)(e.componentRegistry)(e.templateMetadata)}}return t.prototype.start=function(){return window.devDynamicContent={},window.defaultValues=this.getDefaultValues(),window.DV=Object.keys(window.defaultValues),window.onload=this.onWindowLoad,this.bindWindowMessageEventListener(),this.bindAdInitializedEventListener(),this},t.prototype.getValue=function(t){var e,n=this.templateMetadata.elements[t],o=null!==(e=null==n?void 0:n.reportingDimension)&&void 0!==e?e:t;return window.defaultValues[o]},t.prototype.applyAdLibElementAttributes=function(){for(var t,e=this.templateMetadata.elements,n=0,o=Object.entries(e);n<o.length;n++){var r=o[n],i=r[0],a=r[1],u=null!==(t=a.reportingDimension)&&void 0!==t?t:i,l=document.getElementById(i);l&&(a.text?l.setAttribute("adlib-text",u):a.image&&l.setAttribute("adlib-image",u))}},t.prototype.applyDynamicStyles=function(){if(Enabler.isServingInLiveEnvironment())for(var t=0,e=Object.entries(this.getLiveProductData());t<e.length;t++){var n=e[t],o=n[0],r=n[1],i=o.match(/([a-zA-Zd]+)_style$/);if(null!==i){var u=i[1],l=(0,a.getElementIdByFeedKey)(this.templateMetadata,u),s=document.getElementById(l);null!==s&&s.setAttribute("style",String(r))}}},t.prototype.bindWindowMessageEventListener=function(){var t=this;window.addEventListener("message",(function(e){var n;(null===(n=e.data)||void 0===n?void 0:n.type)===u.UPDATE_VALUES&&t.onUpdateValues(e)}))},t.prototype.onUpdateValues=function(t){var e=u.fromEvent(t);window.defaultValues=o(o({},this.getDefaultValues()),e.data),Adlib.populateElements()},t.prototype.bindAdInitializedEventListener=function(){window.document.addEventListener("adinitialized",(function(){window.parent.postMessage(l.build(),"*")}))},t}();e.default=s},135:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.build=void 0,e.build=function(){return{type:"AD_INITIALIZED"}}},67:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=e.build=e.UPDATE_VALUES=void 0,e.UPDATE_VALUES="UPDATE_VALUES",e.build=function(t){return n({type:e.UPDATE_VALUES,data:{}},t)},e.fromEvent=function(t){if(t.data&&t.data.type===e.UPDATE_VALUES&&void 0!==t.data.data&&null!==t.data.data)return{type:e.UPDATE_VALUES,data:t.data.data};throw new Error("Invalid message type or content. Expected '".concat(e.UPDATE_VALUES,"', received '").concat(t.type,"'"))}},962:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getElementIdByFeedKey=void 0,e.getElementIdByFeedKey=function(t,e){for(var n,o=0,r=Object.entries(t.elements);o<r.length;o++){var i=r[o],a=i[0];if((null!==(n=i[1].reportingDimension)&&void 0!==n?n:a)===e)return a}return null}}},e={},n=function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(42);window.TemplateRuntime=n.default})();